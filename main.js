!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var r=function(){function e(t){var n=t.baseUrl,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=o}var t,n,r;return t=e,(n=[{key:"getUserData",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"editProfile",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e["user-name"],about:e["profile-description"]})}).then((function(e){return t._getResponseData(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({link:e,name:t})}).then((function(e){return n._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._getResponseData(e)}))}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("Ошибка: ".concat(e.status)))}},{key:"loadAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserData()])}}])&&o(t.prototype,n),r&&o(t,r),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(t,n,o,r,i,a){var u=o.photoDescription,c=o.link,l=o.likesAmount,s=o.owner,p=o.id,f=o.userId,h=o.arrayOfLikes,_=r.handleCardClick,d=i.handleLikeClick,v=a.handleDeleteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._photoCardSelector=t,this._photoDescription=u,this._link=c,this._user=f,this._owner=s,this._id=p,this._likes=h,this._likesAmount=l,this._handleCardClick=_,this._handleLikeClick=d,this._handleDeleteIconClick=v,this._myPhotoCardSelector=n}var t,n,o;return t=e,(n=[{key:"_getTemplate",value:function(){var e=this._photoCardSelector;return this._isOwnersCard()&&(e=this._myPhotoCardSelector),document.querySelector(e).content.querySelector("li").cloneNode(!0)}},{key:"_isOwnersCard",value:function(){return this._owner===this._user}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".photo-card__photo");return t.src=this._link,t.alt=this._photoDescription,this._element.querySelector(".photo-card__description").textContent=this._photoDescription,this._element.querySelector(".photo-card__likes-amount").textContent=this._likesAmount,this._likes&&this._likes.some((function(t){return t._id===e._user}))&&this._element.querySelector(".photo-card__like").classList.add("photo-card__like_active"),this._element}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(".photo-card__delete-button");t&&t.addEventListener("click",(function(){e._handleDeleteIconClick(event)})),this._element.querySelector(".photo-card__like").addEventListener("click",(function(){e._handleLikeClick(event)})),this._element.querySelector(".photo-card__photo").addEventListener("click",(function(){e._handleCardClick(event)}))}},{key:"keepLikes",value:function(){}},{key:"_toggleLike",value:function(e){e.target.classList.toggle("photo-card__like_active")}}])&&i(t.prototype,n),o&&i(t,o),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationConfig=t,this._formToValidate=n}var t,n,o;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=e.closest(this._validationConfig.inputSelector);n.classList.add(this._validationConfig.inputErrorClass);var o=n.querySelector(this._validationConfig.errorClass);e.classList.add(this._validationConfig.fieldErrorSelector),o.textContent=t}},{key:"_hideInputError",value:function(e){var t=e.closest(this._validationConfig.inputSelector);t.classList.remove(this._validationConfig.inputErrorClass);var n=t.querySelector(this._validationConfig.errorClass);e.classList.remove(this._validationConfig.fieldErrorSelector),n.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?this._makeButtonInactive(t,this._validationConfig.inactiveButtonClass):this._makeButtonActive(t,this._validationConfig.inactiveButtonClass)}},{key:"_makeButtonInactive",value:function(e){e.classList.add(this._validationConfig.inactiveButtonClass),e.setAttribute("disabled",!0)}},{key:"_makeButtonActive",value:function(e){e.classList.remove(this._validationConfig.inactiveButtonClass),e.removeAttribute("disabled")}},{key:"hidePopupErrors",value:function(e){var t=this;e.querySelectorAll(this._validationConfig.inputSelector).forEach((function(e){e.classList.remove(t._validationConfig.inputErrorClass)})),e.querySelectorAll(this._validationConfig.fieldSelector).forEach((function(e){e.classList.remove(t._validationConfig.fieldErrorSelector)})),e.querySelectorAll(this._validationConfig.errorClass).forEach((function(e){e.textContent=""}))}},{key:"resetForm",value:function(e,t){this._makeButtonInactive(t),this.hidePopupErrors(e)}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._validationConfig.fieldSelector)),o=e.querySelector(this._validationConfig.submitButtonSelector);this._toggleButtonState(n,o,this._validationConfig.inactiveButtonClass),n.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(n,o)}))}))}},{key:"enableValidation",value:function(){var e=this;document.querySelectorAll(this._validationConfig.formSelector).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),e._setEventListeners(t)}))}}])&&u(t.prototype,n),o&&u(t,o),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(t,n,o,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._commonPopupClass=n,this._openedPopupClass=o,this._closeButtonClass=r,this._popup=document.querySelector(this._popupSelector),this._handleEscClose=this._handleEscClose.bind(this)}var t,n,o;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._openedPopupClass),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._openedPopupClass),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(){"Escape"===event.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains(e._commonPopupClass)||t.target.classList.contains(e._closeButtonClass))&&e.close()}))}}])&&l(t.prototype,n),o&&l(t,o),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(t){var r=y(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,o,r=d(i);function i(e,t,n){var o,a=e.popupSelector,u=t.formSelectors,c=n.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,a,u.commonPopupClass,u.openedPopupClass,u.closeButtonClass))._handleFormSubmit=c,o._inputSelector=u.inputSelector,o._formSelector=u.formSelector,o._submitButtonSelector=u.submitButtonSelector,o._inputList=o._popup.querySelectorAll(o._inputSelector),o._form=o._popup.querySelector(o._formSelector),o._submitButton=o._popup.querySelector(o._submitButtonSelector),o}return t=i,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;h(y(i.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){var e=this;h(y(i.prototype),"close",this).call(this),this._form.reset(),setTimeout((function(){e._submitButton.textContent=e._submitButton.name}))}},{key:"makeButtonLoading",value:function(e){this._submitButton.textContent=e}}])&&f(t.prototype,n),o&&f(t,o),i}(s);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t,n,o,r=C(i);function i(e,t,n,o,a,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(c=r.call(this,e,t,n,o))._photoFullScreenSelector=a,c._photoCaptionSelector=u,c._photoFullScreen=c._popup.querySelector(c._photoFullScreenSelector),c._photoCaption=c._popup.querySelector(c._photoCaptionSelector),c}return t=i,(n=[{key:"open",value:function(e,t){this._photoFullScreen.src=e,this._photoCaption.innerText=t,this._photoFullScreen.alt=t,g(E(i.prototype),"open",this).call(this)}}])&&S(t.prototype,n),o&&S(t,o),i}(s);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(i,e);var t,n,o,r=D(i);function i(e,t,n){var o,a=e.popupSelector,u=t.formSelectors,c=n.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,a,u.commonPopupClass,u.openedPopupClass,u.closeButtonClass))._formSelector=u.formSelector,o._popup=document.querySelector(a),o._form=o._popup.querySelector(o._formSelector),o._handleSubmitAction=c,o}return t=i,(n=[{key:"setSubmitAction",value:function(e){this._handleSubmitAction=e}},{key:"setEventListeners",value:function(){var e=this;j(R(i.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(){e._handleSubmitAction()}))}}])&&P(t.prototype,n),o&&P(t,o),i}(s);function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var T=function(){function e(t,n){var o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._container=document.querySelector(n)}var t,n,o;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.reverse().forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&B(t.prototype,n),o&&B(t,o),e}();function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var U=function(){function e(t){var n=t.userNameSelector,o=t.profileDescriptionSelector,r=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameSelector=n,this._profileDescriptionSelector=o,this._avatarSelector=r,this._userName=document.querySelector(this._userNameSelector),this._profileDescription=document.querySelector(this._profileDescriptionSelector),this._avatar=document.querySelector(this._avatarSelector)}var t,n,o;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData={},this._userData["user-name"]=this._userName.textContent,this._userData["profile-description"]=this._profileDescription.textContent,this._userData}},{key:"setUserInfo",value:function(e){var t=e.userName,n=e.userDescription,o=e.userAvatar;t&&(this._userName.textContent=t),n&&(this._profileDescription.textContent=n),o&&(this._avatar.src=o)}}])&&x(t.prototype,n),o&&x(t,o),e}(),N={formSelector:".popup__form",inputSelector:".popup__input",fieldSelector:".popup__field",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",errorClass:".popup__field-error",fieldErrorSelector:"popup__field_type_error",inputErrorClass:"popup__input_type_error"};n(0);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var M=document.querySelector(".popup_type_profile"),J=M.querySelector(".popup__form"),H=document.querySelector(".profile"),z=M.querySelector(".popup__field_name"),$=M.querySelector(".popup__field_description"),G=H.querySelector(".profile__edit-button"),K=H.querySelector(".profile__avatar-overlay"),Q=document.querySelector(".popup_type_add-photo"),W=Q.querySelector(".popup__form"),X=Q.querySelector(".popup__submit-button"),Y=Q.querySelector(".popup__field_photo-description"),Z=Q.querySelector(".popup__field_photo-link"),ee=H.querySelector(".profile__add-button"),te=document.querySelector(".popup_type_change-avatar"),ne=te.querySelector(".popup__form"),oe=te.querySelector(".popup__field_photo-link"),re=te.querySelector(".popup__submit-button"),ie={commonPopupClass:"popup",openedPopupClass:"popup_opened",closeButtonClass:"popup__close-button",inputSelector:".popup__field",formSelector:".popup__form",submitButtonSelector:".popup__submit-button"},ae=new U({userNameSelector:".profile__name",profileDescriptionSelector:".profile__description",avatarSelector:".profile__avatar"}),ue=new r({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-14",headers:{authorization:"281eea5d-a9b0-4240-a494-1ec91d19957f","Content-Type":"application/json"}});ue.loadAppInfo().then((function(e){var t=F(e,2),n=t[0],o=t[1];ae.setUserInfo({userName:o.name,userDescription:o.about,userAvatar:o.avatar}),ce.renderItems(n)})).catch((function(e){console.log(e)}));var ce=new T({renderer:function(e){var t=ye(e.name,e.link,e.likes.length,e.owner._id,e._id,e.likes);ce.addItem(t)}},".photo-cards__list"),le=new c(N,J),se=new c(N,W),pe=new c(N,ne),fe=new m({popupSelector:".popup_type_profile"},{formSelectors:ie},{handleFormSubmit:function(e){fe.makeButtonLoading("Сохранение..."),ue.editProfile(e).then((function(){ue.getUserData().then((function(e){ae.setUserInfo({userName:e.name,userDescription:e.about})})).catch((function(e){console.log(e)}))})).then((function(){fe.close()}))}}),he=new m({popupSelector:".popup_type_add-photo"},{formSelectors:ie},{handleFormSubmit:function(){he.makeButtonLoading("Создание..."),ue.addNewCard(Z.value,Y.value).then((function(e){return ye(e.name,e.link,e.likes.length,e.owner._id,e._id)})).then((function(e){ce.addItem(e)})).then((function(){he.close()})).catch((function(e){console.log(e)}))}}),_e=new m({popupSelector:".popup_type_change-avatar"},{formSelectors:ie},{handleFormSubmit:function(){_e.makeButtonLoading("Сохранение..."),ue.changeAvatar(oe.value).then((function(e){ae.setUserInfo({userAvatar:e.avatar})})).then((function(){_e.close()})).catch((function(e){console.log(e)}))}}),de=new O(".popup_type_photo-view","popup","popup_opened","popup__close-button",".popup__photo-fullscreen",".popup__photo-caption");de.setEventListeners();var ve=new A({popupSelector:".popup_type_delete-card"},{formSelectors:ie},{handleSubmit:function(){}});function ye(e,t,n,o,r,i){var u=new a(".photo-card-template",".photo-card-template_mine",{photoDescription:e,link:t,likesAmount:n,owner:o,id:r,userId:"5a4f361b745774983a48beec",arrayOfLikes:i},{handleCardClick:function(){de.open(t,e)}},{handleLikeClick:function(e){var t=e.target.closest(".photo-card__like-container").querySelector(".photo-card__likes-amount");e.target.classList.contains("photo-card__like_active")?ue.removeLike(r).then((function(n){t.textContent=n.likes.length,u._toggleLike(e)})).catch((function(e){console.log(e)})):ue.addLike(r).then((function(n){t.textContent=n.likes.length,u._toggleLike(e)})).catch((function(e){console.log(e)}))}},{handleDeleteIconClick:function(e){ve.setSubmitAction((function(){var t=e.target.closest("li");ue.deleteCard(r).then((function(){t.remove()})).then((function(){ve.close()})).catch((function(e){console.log(e)}))})),ve.open()}});return u.generateCard()}ve.setEventListeners(),he.setEventListeners(),fe.setEventListeners(),_e.setEventListeners(),le.enableValidation(),se.enableValidation(),pe.enableValidation(),G.addEventListener("click",(function(){var e=ae.getUserInfo();z.value=e[z.name],$.value=e[$.name],le.hidePopupErrors(M),fe.open()})),ee.addEventListener("click",(function(){se.resetForm(Q,X),he.open()})),K.addEventListener("click",(function(){pe.resetForm(te,re),_e.open()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJfZ2V0UmVzcG9uc2VEYXRhIiwiZm9ybVZhbHVlcyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJwaWN0dXJlTGluayIsInBpY3R1cmVEZXNjcmlwdGlvbiIsImxpbmsiLCJjYXJkSWQiLCJhdmF0YXJMaW5rIiwiYXZhdGFyIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIkVycm9yIiwic3RhdHVzIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckRhdGEiLCJDYXJkIiwicGhvdG9DYXJkU2VsZWN0b3IiLCJteVBob3RvQ2FyZFNlbGVjdG9yIiwicGhvdG9EZXNjcmlwdGlvbiIsImxpa2VzQW1vdW50Iiwib3duZXIiLCJpZCIsInVzZXJJZCIsImFycmF5T2ZMaWtlcyIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUljb25DbGljayIsIl9waG90b0NhcmRTZWxlY3RvciIsIl9waG90b0Rlc2NyaXB0aW9uIiwiX2xpbmsiLCJfdXNlciIsIl9vd25lciIsIl9pZCIsIl9saWtlcyIsIl9saWtlc0Ftb3VudCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUljb25DbGljayIsIl9teVBob3RvQ2FyZFNlbGVjdG9yIiwiYXBwbGljYWJsZUNhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiX2lzT3duZXJzQ2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInBob3RvRWxlbWVudCIsInNyYyIsImFsdCIsInRleHRDb250ZW50Iiwic29tZSIsImxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJkZWxldGVQaG90b0J1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVRvVmFsaWRhdGUiLCJfdmFsaWRhdGlvbkNvbmZpZyIsIl9mb3JtVG9WYWxpZGF0ZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9ySW5wdXQiLCJjbG9zZXN0IiwiaW5wdXRTZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yRWxlbWVudCIsImVycm9yQ2xhc3MiLCJmaWVsZEVycm9yU2VsZWN0b3IiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsIl9tYWtlQnV0dG9uSW5hY3RpdmUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX21ha2VCdXR0b25BY3RpdmUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwb3B1cCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXQiLCJmaWVsZFNlbGVjdG9yIiwiZmllbGQiLCJlcnJvciIsImhpZGVQb3B1cEVycm9ycyIsImZvcm1FbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZm9ybVNlbGVjdG9yIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjb21tb25Qb3B1cENsYXNzIiwib3BlbmVkUG9wdXBDbGFzcyIsImNsb3NlQnV0dG9uQ2xhc3MiLCJfcG9wdXBTZWxlY3RvciIsIl9jb21tb25Qb3B1cENsYXNzIiwiX29wZW5lZFBvcHVwQ2xhc3MiLCJfY2xvc2VCdXR0b25DbGFzcyIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TZWxlY3RvcnMiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRTZWxlY3RvciIsIl9mb3JtU2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2Zvcm1WYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInNldFRpbWVvdXQiLCJsb2FkaW5nQnV0dG9uVGV4dCIsIlBvcHVwV2l0aEltYWdlIiwicGhvdG9GdWxsU2NyZWVuU2VsZWN0b3IiLCJwaG90b0NhcHRpb25TZWxlY3RvciIsIl9waG90b0Z1bGxTY3JlZW5TZWxlY3RvciIsIl9waG90b0NhcHRpb25TZWxlY3RvciIsIl9waG90b0Z1bGxTY3JlZW4iLCJfcGhvdG9DYXB0aW9uIiwiaW5uZXJUZXh0IiwiUG9wdXBEZWxldGVDb25maXJtYXRpb24iLCJoYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0QWN0aW9uIiwiaGFuZGxlciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWVTZWxlY3RvciIsIl9wcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsIl9hdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJfYXZhdGFyIiwiX3VzZXJEYXRhIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJ1c2VyQXZhdGFyIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwRWRpdFByb2ZpbGVGb3JtIiwicHJvZmlsZSIsIm5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicG9wdXBFZGl0UHJvZmlsZU9wZW5CdXR0b24iLCJhdmF0YXJPdmVybGF5IiwicG9wdXBBZGRQaG90byIsInBvcHVwQWRkUGhvdG9Gb3JtIiwicG9wdXBBZGRQaG90b1N1Ym1pdEJ1dHRvbiIsIm5ld1Bob3RvRGVzY3JpcHRpb25JbnB1dCIsIm5ld1Bob3RvTGlua0lucHV0IiwicG9wdXBBZGRQaG90b09wZW5CdXR0b24iLCJwb3B1cEVkaXRBdmF0YXJFbGVtZW50IiwicG9wdXBFZGl0QXZhdGFyRm9ybSIsIm5ld0F2YXRhckxpbmtJbnB1dCIsInBvcHVwRWRpdEF2YXRhclN1Ym1pdEJ1dHRvbiIsInBvcHVwU2VsZWN0b3JzIiwidXNlclByb2ZpbGVEYXRhIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImxvYWRBcHBJbmZvIiwiY2FyZExpc3QiLCJ1c2VyRGF0YSIsInNldFVzZXJJbmZvIiwiY2FyZFJlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJjb25zb2xlIiwibG9nIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwibGlrZXMiLCJsZW5ndGgiLCJhZGRJdGVtIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRQaG90b0Zvcm1WYWxpZGF0b3IiLCJlZGl0QXZhdGFyVmFsaWRhdG9yIiwicHJvZmlsZUZvcm0iLCJtYWtlQnV0dG9uTG9hZGluZyIsImVkaXRQcm9maWxlIiwiZGF0YSIsImFkZFBob3RvRm9ybSIsImFkZE5ld0NhcmQiLCJjYXJkRGF0YSIsIm5ld1Bob3RvQ2FyZCIsInBvcHVwRWRpdEF2YXRhciIsImNoYW5nZUF2YXRhciIsInBvcHVwV2l0aFBob3RvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cERlbGV0ZUNhcmQiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiYW1vdW50T2ZMaWtlcyIsIm93bmVySWQiLCJvcGVuIiwicGhvdG9MaWtlc0Ftb3VudCIsInJlbW92ZUxpa2UiLCJsaWtlZENhcmQiLCJfdG9nZ2xlTGlrZSIsImFkZExpa2UiLCJzZXRTdWJtaXRBY3Rpb24iLCJjYXJkVG9EZWxldGUiLCJkZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImdldFVzZXJJbmZvIiwicmVzZXRGb3JtIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RE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LE1BQ3JDc04sRUFBd0I1TSxNQUFRK04sRUFBU25CLEVBQXdCdE4sTUFDakVvUCxHQUFxQjdHLGdCQUFnQjJFLEdBQ3JDcUMsR0FBWWlCLFVBR2hCMUMsR0FBd0I5SCxpQkFBaUIsU0FBUyxXQUM5Q3FKLEdBQXNCK0IsVUFBVTNELEVBQWVFLEdBQy9DZ0MsR0FBYWEsVUFHakJoRCxFQUFjeEgsaUJBQWlCLFNBQVMsV0FDcENzSixHQUFvQjhCLFVBQVVyRCxHQUF3QkcsSUFDdEQ2QixHQUFnQlMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuXG4gICAgZ2V0VXNlckRhdGEoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlZGl0UHJvZmlsZShmb3JtVmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGZvcm1WYWx1ZXNbJ3VzZXItbmFtZSddLFxuICAgICAgICAgICAgICAgIGFib3V0OiBmb3JtVmFsdWVzWydwcm9maWxlLWRlc2NyaXB0aW9uJ11cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZE5ld0NhcmQocGljdHVyZUxpbmssIHBpY3R1cmVEZXNjcmlwdGlvbikge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGxpbms6IHBpY3R1cmVMaW5rLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBpY3R1cmVEZXNjcmlwdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2hhbmdlQXZhdGFyKGF2YXRhckxpbmspIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGF2YXRhcjogYXZhdGFyTGluayxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9nZXRSZXNwb25zZURhdGEocmVzKXtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKSk7XG4gICAgfVxuXG4gICAgbG9hZEFwcEluZm8oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VyRGF0YSgpXSk7XG4gICAgICB9XG5cbn0iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoIHBob3RvQ2FyZFNlbGVjdG9yLCBteVBob3RvQ2FyZFNlbGVjdG9yLCB7IHBob3RvRGVzY3JpcHRpb24sIGxpbmssIGxpa2VzQW1vdW50LCBvd25lciwgaWQsIHVzZXJJZCwgYXJyYXlPZkxpa2VzIH0sIFxuICAgIHsgaGFuZGxlQ2FyZENsaWNrIH0sIHsgaGFuZGxlTGlrZUNsaWNrIH0sIHsgaGFuZGxlRGVsZXRlSWNvbkNsaWNrIH0gKSB7XG4gICAgICAgIHRoaXMuX3Bob3RvQ2FyZFNlbGVjdG9yID0gcGhvdG9DYXJkU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3Bob3RvRGVzY3JpcHRpb24gPSBwaG90b0Rlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICAgICAgdGhpcy5fdXNlciA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5fb3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBhcnJheU9mTGlrZXM7XG4gICAgICAgIHRoaXMuX2xpa2VzQW1vdW50ID0gbGlrZXNBbW91bnQ7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uQ2xpY2sgPSBoYW5kbGVEZWxldGVJY29uQ2xpY2s7XG4gICAgICAgIHRoaXMuX215UGhvdG9DYXJkU2VsZWN0b3IgPSBteVBob3RvQ2FyZFNlbGVjdG9yO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IGFwcGxpY2FibGVDYXJkVGVtcGxhdGVTZWxlY3RvciA9IHRoaXMuX3Bob3RvQ2FyZFNlbGVjdG9yO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX2lzT3duZXJzQ2FyZCgpKSB7XG4gICAgICAgICAgICBhcHBsaWNhYmxlQ2FyZFRlbXBsYXRlU2VsZWN0b3IgPSB0aGlzLl9teVBob3RvQ2FyZFNlbGVjdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihhcHBsaWNhYmxlQ2FyZFRlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgIC5jb250ZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCdsaScpXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIF9pc093bmVyc0NhcmQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vd25lciA9PT0gdGhpcy5fdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgY29uc3QgcGhvdG9FbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tY2FyZF9fcGhvdG8nKTtcbiAgICAgICAgcGhvdG9FbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIHBob3RvRWxlbWVudC5hbHQgPSB0aGlzLl9waG90b0Rlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1jYXJkX19kZXNjcmlwdGlvbicpLnRleHRDb250ZW50ID0gdGhpcy5fcGhvdG9EZXNjcmlwdGlvbjtcbiAgICAgICAgY29uc3QgbGlrZXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1jYXJkX19saWtlcy1hbW91bnQnKTtcbiAgICAgICAgbGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0Ftb3VudDtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9saWtlcyAmJiB0aGlzLl9saWtlcy5zb21lKGxpa2UgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXIpKSB7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1jYXJkX19saWtlJykuY2xhc3NMaXN0LmFkZCgncGhvdG8tY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG4gICAgXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBkZWxldGVQaG90b0J1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWNhcmRfX2RlbGV0ZS1idXR0b24nKTtcbiAgICAgICAgaWYgKGRlbGV0ZVBob3RvQnV0dG9uKSB7XG4gICAgICAgICAgICBkZWxldGVQaG90b0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVJY29uQ2xpY2soZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1jYXJkX19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soZXZlbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1jYXJkX19waG90bycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAga2VlcExpa2VzKCl7XG5cbiAgICB9XG5cbiAgICBfdG9nZ2xlTGlrZShldmVudCl7XG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdwaG90by1jYXJkX19saWtlX2FjdGl2ZScpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1Ub1ZhbGlkYXRlKSB7XG4gICAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWc7XG4gICAgdGhpcy5fZm9ybVRvVmFsaWRhdGUgPSBmb3JtVG9WYWxpZGF0ZTtcbn1cblxuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JJbnB1dCA9IGlucHV0RWxlbWVudC5jbG9zZXN0KHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3Rvcik7XG4gICAgZXJyb3JJbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBlcnJvcklucHV0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmZpZWxkRXJyb3JTZWxlY3Rvcik7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICB9XG4gIFxuIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvcklucHV0ID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKTtcbiAgICBlcnJvcklucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGVycm9ySW5wdXQucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZmllbGRFcnJvclNlbGVjdG9yKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgfVxuICBcbiBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCl7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICBcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbiAgXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX21ha2VCdXR0b25JbmFjdGl2ZShidXR0b25FbGVtZW50LCB0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX21ha2VCdXR0b25BY3RpdmUoYnV0dG9uRWxlbWVudCwgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cbiAgXG4gIF9tYWtlQnV0dG9uSW5hY3RpdmUoYnV0dG9uRWxlbWVudCkge1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICB9XG4gIFxuICBfbWFrZUJ1dHRvbkFjdGl2ZShidXR0b25FbGVtZW50KSB7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gIH1cblxuIGhpZGVQb3B1cEVycm9ycyhwb3B1cCkge1xuICAgIGNvbnN0IGlucHV0cyA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKTtcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH0pO1xuICBcbiAgICBjb25zdCBmaWVsZHMgPSBwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZmllbGRTZWxlY3Rvcik7XG4gICAgZmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICBmaWVsZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZmllbGRFcnJvclNlbGVjdG9yKTtcbiAgICB9KTtcbiAgXG4gICAgY29uc3QgZXJyb3JzID0gcG9wdXAucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIGVycm9ycy5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSAnJztcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0Rm9ybShwb3B1cCwgYnV0dG9uRWxlbWVudCkge1xuICAgIHRoaXMuX21ha2VCdXR0b25JbmFjdGl2ZShidXR0b25FbGVtZW50KTtcbiAgICB0aGlzLmhpZGVQb3B1cEVycm9ycyhwb3B1cCk7XG4gIH1cbiAgXG4gX3NldEV2ZW50TGlzdGVuZXJzIChmb3JtRWxlbWVudCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmZpZWxkU2VsZWN0b3IpKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIFxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICBcbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuXG5cblxuXG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGNvbW1vblBvcHVwQ2xhc3MsIG9wZW5lZFBvcHVwQ2xhc3MsIGNsb3NlQnV0dG9uQ2xhc3MpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2NvbW1vblBvcHVwQ2xhc3MgPSBjb21tb25Qb3B1cENsYXNzO1xuICAgICAgICB0aGlzLl9vcGVuZWRQb3B1cENsYXNzID0gb3BlbmVkUG9wdXBDbGFzcztcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b25DbGFzcyA9IGNsb3NlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlbmVkUG9wdXBDbGFzcyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wZW5lZFBvcHVwQ2xhc3MpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoKSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2NvbW1vblBvcHVwQ2xhc3MpIHx8IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fY2xvc2VCdXR0b25DbGFzcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvciAoeyBwb3B1cFNlbGVjdG9yIH0sIHsgZm9ybVNlbGVjdG9ycyB9LCB7IGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBmb3JtU2VsZWN0b3JzLmNvbW1vblBvcHVwQ2xhc3MsIGZvcm1TZWxlY3RvcnMub3BlbmVkUG9wdXBDbGFzcywgZm9ybVNlbGVjdG9ycy5jbG9zZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBmb3JtU2VsZWN0b3JzLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcnMuZm9ybVNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZvcm1TZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7IHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSkgfSk7XG4gICAgfSBcbiAgICBcbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uLm5hbWU7IH0pIFxuICAgIH1cblxuICAgIG1ha2VCdXR0b25Mb2FkaW5nKGxvYWRpbmdCdXR0b25UZXh0KXtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ0J1dHRvblRleHQ7XG4gICAgfVxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3RvciwgY29tbW9uUG9wdXBDbGFzcywgb3BlbmVkUG9wdXBDbGFzcywgY2xvc2VCdXR0b25DbGFzcywgcGhvdG9GdWxsU2NyZWVuU2VsZWN0b3IsIHBob3RvQ2FwdGlvblNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IsIGNvbW1vblBvcHVwQ2xhc3MsIG9wZW5lZFBvcHVwQ2xhc3MsIGNsb3NlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9waG90b0Z1bGxTY3JlZW5TZWxlY3RvciA9IHBob3RvRnVsbFNjcmVlblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9waG90b0NhcHRpb25TZWxlY3RvciA9IHBob3RvQ2FwdGlvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9waG90b0Z1bGxTY3JlZW4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3Bob3RvRnVsbFNjcmVlblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcGhvdG9DYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9waG90b0NhcHRpb25TZWxlY3Rvcik7XG4gICAgfVxuICAgIFxuICAgIG9wZW4obGluaywgcGhvdG9EZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLl9waG90b0Z1bGxTY3JlZW4uc3JjID0gbGluaztcbiAgICAgICAgdGhpcy5fcGhvdG9DYXB0aW9uLmlubmVyVGV4dCA9IHBob3RvRGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuX3Bob3RvRnVsbFNjcmVlbi5hbHQgPSBwaG90b0Rlc2NyaXB0aW9uO1xuICAgICAgICBzdXBlci5vcGVuKCk7ICAgIFxuICAgIH1cbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBEZWxldGVDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IgKHsgcG9wdXBTZWxlY3RvciB9LCB7IGZvcm1TZWxlY3RvcnMgfSwgeyBoYW5kbGVTdWJtaXQgfSApIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3RvciwgZm9ybVNlbGVjdG9ycy5jb21tb25Qb3B1cENsYXNzLCBmb3JtU2VsZWN0b3JzLm9wZW5lZFBvcHVwQ2xhc3MsIGZvcm1TZWxlY3RvcnMuY2xvc2VCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcnMuZm9ybVNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEFjdGlvbiA9IGhhbmRsZVN1Ym1pdDsgICAgXG4gICAgfVxuICAgIFxuICAgIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVyKXtcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0QWN0aW9uID0gaGFuZGxlcjtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7IHRoaXMuX2hhbmRsZVN1Ym1pdEFjdGlvbigpIH0pO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcil7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGl0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICAgIH1cbiAgICBcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IgKHsgdXNlck5hbWVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWVTZWxlY3RvciA9IHVzZXJOYW1lU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yID0gcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gYXZhdGFyU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl91c2VyTmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYXZhdGFyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICB0aGlzLl91c2VyRGF0YSA9IHt9O1xuICAgICAgICB0aGlzLl91c2VyRGF0YVsndXNlci1uYW1lJ10gPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcbiAgICAgICAgdGhpcy5fdXNlckRhdGFbJ3Byb2ZpbGUtZGVzY3JpcHRpb24nXSA9IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcblxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGE7XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oe3VzZXJOYW1lLCB1c2VyRGVzY3JpcHRpb24sIHVzZXJBdmF0YXJ9KSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodXNlck5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlck5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyQXZhdGFyKSB7XG4gICAgICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlckF2YXRhcjtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgICBmaWVsZFNlbGVjdG9yOiAnLnBvcHVwX19maWVsZCcsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdC1idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZScsXG4gICAgZXJyb3JDbGFzczogJy5wb3B1cF9fZmllbGQtZXJyb3InLFxuICAgIGZpZWxkRXJyb3JTZWxlY3RvcjogJ3BvcHVwX19maWVsZF90eXBlX2Vycm9yJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gIH07IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7IFBvcHVwRGVsZXRlQ29uZmlybWF0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uZmlnLmpzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfcHJvZmlsZScpO1xuY29uc3QgcG9wdXBFZGl0UHJvZmlsZUZvcm0gPSBwb3B1cEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XG5jb25zdCBuYW1lSW5wdXQgPSBwb3B1cEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfbmFtZScpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBwb3B1cEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfZGVzY3JpcHRpb24nKTtcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVPcGVuQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmNvbnN0IGF2YXRhck92ZXJsYXkgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItb3ZlcmxheScpO1xuXG5jb25zdCBwb3B1cEFkZFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkLXBob3RvJyk7XG5jb25zdCBwb3B1cEFkZFBob3RvRm9ybSA9IHBvcHVwQWRkUGhvdG8ucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5jb25zdCBwb3B1cEFkZFBob3RvU3VibWl0QnV0dG9uID0gcG9wdXBBZGRQaG90by5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b24nKTtcbmNvbnN0IG5ld1Bob3RvRGVzY3JpcHRpb25JbnB1dCA9IHBvcHVwQWRkUGhvdG8ucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9waG90by1kZXNjcmlwdGlvbicpO1xuY29uc3QgbmV3UGhvdG9MaW5rSW5wdXQgPSBwb3B1cEFkZFBob3RvLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfcGhvdG8tbGluaycpO1xuY29uc3QgcG9wdXBBZGRQaG90b09wZW5CdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5cbmNvbnN0IHBvcHVwRWRpdEF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9jaGFuZ2UtYXZhdGFyJyk7XG5jb25zdCBwb3B1cEVkaXRBdmF0YXJGb3JtID0gcG9wdXBFZGl0QXZhdGFyRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbmNvbnN0IG5ld0F2YXRhckxpbmtJbnB1dCA9IHBvcHVwRWRpdEF2YXRhckVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9waG90by1saW5rJyk7XG5jb25zdCBwb3B1cEVkaXRBdmF0YXJTdWJtaXRCdXR0b24gPSBwb3B1cEVkaXRBdmF0YXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpO1xuXG5jb25zdCBteVBob3RvQ2FyZFRlbXBsYXRlU2VsZWN0b3IgPSAnLnBob3RvLWNhcmQtdGVtcGxhdGVfbWluZSc7XG5jb25zdCBteUlkID0gXCI1YTRmMzYxYjc0NTc3NDk4M2E0OGJlZWNcIjtcblxuY29uc3QgcGhvdG9DYXJkc0xpc3RTZWxlY3RvciA9ICcucGhvdG8tY2FyZHNfX2xpc3QnO1xuY29uc3QgcGhvdG9DYXJkVGVtcGxhdGVTZWxlY3RvciA9ICcucGhvdG8tY2FyZC10ZW1wbGF0ZSc7XG5cbmNvbnN0IHBvcHVwQ2xhc3MgPSAncG9wdXAnO1xuY29uc3Qgb3BlbmVkUG9wdXBNb2RpZmllciA9ICdwb3B1cF9vcGVuZWQnO1xuY29uc3QgY2xvc2VQb3B1cEJ1dHRvbkNsYXNzID0gJ3BvcHVwX19jbG9zZS1idXR0b24nO1xuY29uc3QgcG9wdXBJbnB1dFNlbGVjdG9yID0gJy5wb3B1cF9fZmllbGQnO1xuY29uc3QgcG9wdXBGb3JtU2VsZWN0b3IgPSAnLnBvcHVwX19mb3JtJztcbmNvbnN0IHBvcHVwU3VibWl0QnV0dG9uU2VsZWN0b3IgPSAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJztcbmNvbnN0IHBvcHVwU2VsZWN0b3JzID0ge1xuICAgIGNvbW1vblBvcHVwQ2xhc3M6IHBvcHVwQ2xhc3MsXG4gICAgb3BlbmVkUG9wdXBDbGFzczogb3BlbmVkUG9wdXBNb2RpZmllcixcbiAgICBjbG9zZUJ1dHRvbkNsYXNzOiBjbG9zZVBvcHVwQnV0dG9uQ2xhc3MsXG4gICAgaW5wdXRTZWxlY3RvcjogcG9wdXBJbnB1dFNlbGVjdG9yLFxuICAgIGZvcm1TZWxlY3RvcjogcG9wdXBGb3JtU2VsZWN0b3IsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IHBvcHVwU3VibWl0QnV0dG9uU2VsZWN0b3IsXG59XG5cbmNvbnN0IGF2YXRhclNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXInO1xuXG5jb25zdCB1c2VyUHJvZmlsZURhdGEgPSBuZXcgVXNlckluZm8oeyBcbiAgICB1c2VyTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLCBcbiAgICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsIFxuICAgIGF2YXRhclNlbGVjdG9yOiBhdmF0YXJTZWxlY3RvciBcbn0pO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiAnMjgxZWVhNWQtYTliMC00MjQwLWE0OTQtMWVjOTFkMTk5NTdmJyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbn0pO1xuXG5hcGkubG9hZEFwcEluZm8oKVxuICAgIC50aGVuKChbY2FyZExpc3QsIHVzZXJEYXRhXSkgPT4ge1xuICAgICAgICB1c2VyUHJvZmlsZURhdGEuc2V0VXNlckluZm8oe1xuICAgICAgICAgICAgdXNlck5hbWU6IHVzZXJEYXRhLm5hbWUsIFxuICAgICAgICAgICAgdXNlckRlc2NyaXB0aW9uOiB1c2VyRGF0YS5hYm91dCwgXG4gICAgICAgICAgICB1c2VyQXZhdGFyOiB1c2VyRGF0YS5hdmF0YXJcbiAgICAgICAgfSk7XG4gICAgICAgIGNhcmRSZW5kZXJlci5yZW5kZXJJdGVtcyhjYXJkTGlzdCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9KTtcblxuY29uc3QgY2FyZFJlbmRlcmVyID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbS5uYW1lLCBpdGVtLmxpbmssIGl0ZW0ubGlrZXMubGVuZ3RoLCBpdGVtLm93bmVyLl9pZCwgaXRlbS5faWQsIGl0ZW0ubGlrZXMpO1xuICAgICAgICBjYXJkUmVuZGVyZXIuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbn0sXG4gICAgcGhvdG9DYXJkc0xpc3RTZWxlY3Rvcik7ICAgIFxuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRWRpdFByb2ZpbGVGb3JtKTtcbmNvbnN0IGFkZFBob3RvRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwQWRkUGhvdG9Gb3JtKTtcbmNvbnN0IGVkaXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEVkaXRBdmF0YXJGb3JtKTtcblxuY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7IHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wcm9maWxlJyB9LCB7IGZvcm1TZWxlY3RvcnM6IHBvcHVwU2VsZWN0b3JzIH0sXG4gICAge1xuICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybVZhbHVlcykgPT4ge1xuICAgICAgICAgICAgcHJvZmlsZUZvcm0ubWFrZUJ1dHRvbkxvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XG4gICAgICAgICAgICBhcGkuZWRpdFByb2ZpbGUoZm9ybVZhbHVlcylcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5nZXRVc2VyRGF0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlRGF0YS5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEZXNjcmlwdGlvbjogZGF0YS5hYm91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwcm9maWxlRm9ybS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuKTtcblxuY29uc3QgYWRkUGhvdG9Gb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgeyBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYWRkLXBob3RvJyB9LCB7IGZvcm1TZWxlY3RvcnM6IHBvcHVwU2VsZWN0b3JzIH0sXG4gICAge1xuICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoKSA9PiB7XG4gICAgICAgICAgICBhZGRQaG90b0Zvcm0ubWFrZUJ1dHRvbkxvYWRpbmcoJ9Ch0L7Qt9C00LDQvdC40LUuLi4nKTtcbiAgICAgICAgICAgIGFwaS5hZGROZXdDYXJkKG5ld1Bob3RvTGlua0lucHV0LnZhbHVlLCBuZXdQaG90b0Rlc2NyaXB0aW9uSW5wdXQudmFsdWUpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDYXJkKGNhcmREYXRhLm5hbWUsIGNhcmREYXRhLmxpbmssIGNhcmREYXRhLmxpa2VzLmxlbmd0aCwgY2FyZERhdGEub3duZXIuX2lkLCBjYXJkRGF0YS5faWQpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKG5ld1Bob3RvQ2FyZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYXJkUmVuZGVyZXIuYWRkSXRlbShuZXdQaG90b0NhcmQpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhZGRQaG90b0Zvcm0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuKTtcblxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAgeyBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfY2hhbmdlLWF2YXRhcicgfSwgeyBmb3JtU2VsZWN0b3JzOiBwb3B1cFNlbGVjdG9ycyB9LFxuICAgIHtcbiAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgICAgICAgICAgcG9wdXBFZGl0QXZhdGFyLm1ha2VCdXR0b25Mb2FkaW5nKCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICAgICAgICAgICAgYXBpLmNoYW5nZUF2YXRhcihuZXdBdmF0YXJMaW5rSW5wdXQudmFsdWUpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZURhdGEuc2V0VXNlckluZm8oeyB1c2VyQXZhdGFyOiByZXMuYXZhdGFyIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICB9XG4pO1xuXG5jb25zdCBwb3B1cFdpdGhQaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfcGhvdG8tdmlldycsIHBvcHVwQ2xhc3MsIG9wZW5lZFBvcHVwTW9kaWZpZXIsXG5jbG9zZVBvcHVwQnV0dG9uQ2xhc3MsICcucG9wdXBfX3Bob3RvLWZ1bGxzY3JlZW4nLCAnLnBvcHVwX19waG90by1jYXB0aW9uJyk7XG5wb3B1cFdpdGhQaG90by5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBEZWxldGVDb25maXJtYXRpb24oXG4gICAgeyBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmQnIH0sIHsgZm9ybVNlbGVjdG9yczogcG9wdXBTZWxlY3RvcnMgfSwgeyBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uICgpIHt9IH0pO1xucG9wdXBEZWxldGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZE5hbWUsIGNhcmRMaW5rLCBhbW91bnRPZkxpa2VzLCBvd25lcklkLCBjYXJkSWQsIGxpa2VzKSB7XG5cbiAgICBjb25zdCBuZXdQaG90b0NhcmQgPSBuZXcgQ2FyZChwaG90b0NhcmRUZW1wbGF0ZVNlbGVjdG9yLCBteVBob3RvQ2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICAgIHsgcGhvdG9EZXNjcmlwdGlvbjogY2FyZE5hbWUsIGxpbms6IGNhcmRMaW5rLCBsaWtlc0Ftb3VudDogYW1vdW50T2ZMaWtlcywgb3duZXI6IG93bmVySWQsIGlkOiBjYXJkSWQsIHVzZXJJZDogbXlJZCwgYXJyYXlPZkxpa2VzOiBsaWtlcyB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhQaG90by5vcGVuKGNhcmRMaW5rLCBjYXJkTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGhhbmRsZUxpa2VDbGljazogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGhvdG9MaWtlc0Ftb3VudCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcucGhvdG8tY2FyZF9fbGlrZS1jb250YWluZXInKS5xdWVyeVNlbGVjdG9yKCcucGhvdG8tY2FyZF9fbGlrZXMtYW1vdW50Jyk7XG4gICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaG90by1jYXJkX19saWtlX2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5hZGRMaWtlKGNhcmRJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChsaWtlZENhcmQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG90b0xpa2VzQW1vdW50LnRleHRDb250ZW50ID0gbGlrZWRDYXJkLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQaG90b0NhcmQuX3RvZ2dsZUxpa2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmRJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChsaWtlZENhcmQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG90b0xpa2VzQW1vdW50LnRleHRDb250ZW50ID0gbGlrZWRDYXJkLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQaG90b0NhcmQuX3RvZ2dsZUxpa2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGhhbmRsZURlbGV0ZUljb25DbGljazogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcG9wdXBEZWxldGVDYXJkLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRUb0RlbGV0ZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFRvRGVsZXRlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcG9wdXBEZWxldGVDYXJkLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIG5ld1Bob3RvQ2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuYWRkUGhvdG9Gb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZFBob3RvRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxucG9wdXBFZGl0UHJvZmlsZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyUHJvZmlsZURhdGEuZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YVtuYW1lSW5wdXQubmFtZV07XG4gICAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YVtwcm9maWxlRGVzY3JpcHRpb25JbnB1dC5uYW1lXTtcbiAgICBwcm9maWxlRm9ybVZhbGlkYXRvci5oaWRlUG9wdXBFcnJvcnMocG9wdXBFZGl0UHJvZmlsZSk7XG4gICAgcHJvZmlsZUZvcm0ub3BlbigpO1xufSk7XG5cbnBvcHVwQWRkUGhvdG9PcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBcbiAgICBhZGRQaG90b0Zvcm1WYWxpZGF0b3IucmVzZXRGb3JtKHBvcHVwQWRkUGhvdG8sIHBvcHVwQWRkUGhvdG9TdWJtaXRCdXR0b24pO1xuICAgIGFkZFBob3RvRm9ybS5vcGVuKCk7IFxufSk7XG5cbmF2YXRhck92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IFxuICAgIGVkaXRBdmF0YXJWYWxpZGF0b3IucmVzZXRGb3JtKHBvcHVwRWRpdEF2YXRhckVsZW1lbnQsIHBvcHVwRWRpdEF2YXRhclN1Ym1pdEJ1dHRvbik7XG4gICAgcG9wdXBFZGl0QXZhdGFyLm9wZW4oKTsgXG59KTtcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==